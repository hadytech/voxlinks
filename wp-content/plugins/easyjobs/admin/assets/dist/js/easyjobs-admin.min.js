!function(c){"use strict";c.easyjobs=c.easyjobs||{},c(document).ready(function(){c.easyjobs.init()}),c.easyjobs.init=function(){c.easyjobs.handleJobSearch(),c.easyjobs.handlePipelineCandidateChange(),c.easyjobs.handlePipelineStage(),c.easyjobs.searchFilterCandidates(),c.easyjobs.checkApiKey(),c.easyjobs.renderCandidateResume(),c.easyjobs.handleCopyText(),c.easyjobs.connectPlugin(),c.easyjobs.disconnectApi(),c.easyjobs.handlePagination(),c.easyjobs.handleJobDropdown(),c.easyjobs.handleCandidateDetailsTab(),c.easyjobs.handleAllCandidateSearchFilter(),c.easyjobs.handleAllCandidatePagination(),c.easyjobs.handleAllCandidateSearchFilterReset(),c.easyjobs.handlePipelineHamburgerToggle(),c.easyjobs.handlePipelineCandidateDrag(),c.easyjobs.handlePipelineGridRegenerate(),c.easyjobs.handleSignInOptionToggle(),c.easyjobs.handleSignIn(),c.easyjobs.handleCompanySelect(),c.easyjobs.initSelect2(),c.easyjobs.handleSignUp(),c.easyjobs.handleCompanyCreate(),c.easyjobs.handleMovePipleButtonDisplay(),c.easyjobs.handleJobDelete(),c.easyjobs.handleAdminMenuHighlight(),c.easyjobs.handleCandidateExport(),c.easyjobs.handleCandidateInvite(),c.easyjobs.handleRating(),c.easyjobs.handleGreetingModal(),c.easyjobs.handleWatchVideo()},c.easyjobs.handleJobSearch=function(){var e,a=c(".easyjobs-job-search");a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){m()},1e3)}),a.on("keydown",function(){clearTimeout(e)})},c.easyjobs.handlePipelineCandidateChange=function(){c("a.change-pipeline").on("click",function(e){e.preventDefault();var a=c(this),t=c(".pipeline-box .pipeline-content"),n=a.data("key"),e=a.data("job-id"),i=[],a=c(".applicant:checked");c.each(a,function(e,a){i.push(parseInt(c(a).val()))}),s(n,i,e,t,function(){window.location.replace(easyJobsJs.current_page)})}),c(".candidate-details-pipeline a.stage").on("click",function(e){e.preventDefault();var a=c(this),t=c(".candidate-details-user"),n=a.data("stage"),i=a.data("job-id"),e=a.data("candidate-id");s(n,[e],i,t,function(){c(".candidate-details-pipeline .pipeline-toggle").html(a.html())})})},c.easyjobs.handlePipelineStage=function(){c("body").on("click",".add-new-stage",function(e){e.preventDefault();var a=c("#add_new_stage"),e=a.val();e.length?(c(".pipeline-main-wrapper").append(t(e)),a.val(""),a.siblings(".error-message").html("")):a.siblings(".error-message").html("Please write the step name")}),c("body").on("click",".delete-stage",function(e){e.preventDefault(),c(this).parents(".input-wrapper").remove()}),c("body").on("submit",".save-pipeline",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),e=a.data("job-id"),n=c(".modal"),a=a.find(".pipeline-stage"),i=[];a.each(function(e,a){a=c(a);0===parseInt(a.data("stage-id"))?i.push({id:a.data("stage-id"),name:a.val(),order:e,default:1,is_fixed:1}):i.push({id:a.data("stage-id"),name:a.val(),order:e,default:0,is_fixed:0})}),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:i,nonce:t,job_id:e,action:"easyjobs_save_pipeline"},beforeSend:function(){n.addClass("loading")},success:function(e){"success"===JSON.parse(e).status.trim()&&window.location.replace(easyJobsJs.current_page)},complete:function(){n.removeClass("loading")}})}),c("#pipeline-modal").on("hide.bs.modal",function(){var e=c("#add_new_stage");e.val(""),e.siblings(".error-message").html("")})},c.easyjobs.searchFilterCandidates=function(){var e,a=c(".easyjobs-search-candidates"),t=c(".ej-job-candidate-filter select");c(".ej-candidate-search").on("submit",function(e){e.preventDefault(),r(n())}),a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){r(n())},1e3)}),a.on("keydown",function(){clearTimeout(e)}),c(".easyjobs-filter .filter, .easyjobs-filter .stage-filter").on("change",function(e){e.preventDefault(),r(n())}),t.on("change",function(e){e.preventDefault(),r(n())})},c.easyjobs.checkApiKey=function(){c("#easyjobs-submit-general").off("click").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),n=a.data("key"),e=a.parents("#easyjobs-settings-form").serializeArray();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:t,key:n,action:"easyjobs_connect_api"},beforeSend:function(){a.html("<span>Saving...</span>")},success:function(e){"success"===e.trim()?(swal({title:"Api Connected!",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),setTimeout(function(){location.reload()},500)):swal({title:"Api Not Connected, Invalid api key!",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.html("Save Settings")}})})},c.easyjobs.renderCandidateResume=function(){c('.candidate-tabs a[data-toggle="tab"]').on("shown.bs.tab",function(e){e=c(e.target).attr("href");"#resume"===e&&((e=c(e).find(".resume-link").data("resume-link")).length?c(".candidate-resume-iframe").html('<iframe width="100%" height="500" src=" '+e+'#toolbar=0&navpanes=0&scrollbar=0" frameborder="0"></iframe>'):c(".candidate-resume-iframe").html('<h4 class="empty-message">Not found</h4>'))})},c.easyjobs.handleCopyText=function(){c("body").on("click",".easyjobs-copy-shortcode",function(){var e=c(this),a=e.parent(".easyjobs-control-wrapper ").find(".easyjobs-settings-field"),e=e.find(".easyjobs-copytext");a.select(),document.execCommand("copy"),e.html("Copied: "+a.val())}),c("body").on("mouseout",".easyjobs-copy-shortcode",function(){c(this).find(".easyjobs-copytext").html("Copy to clipboard")})},c.easyjobs.connectPlugin=function(){c(".ej-connect-form-btn").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),n=a.data("key"),i=a.parents(".ej-connect-form"),e=i.serializeArray(),i=i.find('input[name="easyjobs_api_key"]');i.val()?c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:t,key:n,action:"easyjobs_connect_api"},beforeSend:function(){a.html("<span>Connecting...</span>")},success:function(e){("success"===e.trim()?c("#apiConnectStatus").find(".ej-success-msg"):c("#apiConnectStatus").find(".ej-error-msg")).show(),c("#apiConnectStatus").modal()},complete:function(){a.html("Connect")}}):i.siblings(".error-message").length||i.after('<div class="error-message">Please insert api key</div>')}),c("#apiConnectStatus").on("hide.bs.modal",function(e){window.location=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes"})},c.easyjobs.disconnectApi=function(){c(".easyjobs-footer-link-general").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),e=a.data("key");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{nonce:t,key:e,action:"easyjobs_disconnect_api"},beforeSend:function(){a.html("<span>Disconnecting...</span>")},success:function(e){"success"===e.trim()?(swal({title:"Api Disconnected successfully",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),setTimeout(function(){window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin"},500)):swal({title:"Api Disconnect failed",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.html("Disconnect Api")}})})},c.easyjobs.handlePagination=function(){c("body").on("click",".easyjobs-next-page-link",function(e){e.preventDefault();e=c(this).parents(".pagination-list").find(".pagination-list__item--active").next(".pagination-list__item ").find("a").attr("href");"#"!==e&&(window.location=e)}),c("body").on("click",".easyjobs-prev-page-link",function(e){e.preventDefault();e=c(this).parents(".pagination-list").find(".pagination-list__item--active").prev(".pagination-list__item ").find("a").attr("href");"#"!==e&&(window.location=e)})},c.easyjobs.handleJobDropdown=function(){c(".ej-job-type-select .dropdown-item").on("click",function(){var e=c(this),a=e.html();e.attr("href").replace("#","");e.siblings(".dropdown-item").removeClass("active"),c(".ej-job-type-select .dropdown-toggle").html(a)})},c.easyjobs.handleCandidateDetailsTab=function(){c(".applicant-details .nav-tabs .nav-link").on("click",function(){c(this).siblings(".nav-link").removeClass("active")})},c.easyjobs.handleAllCandidateSearchFilter=function(){var e,a=c(".ej-all-candidate-search");a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){_(g())},1e3)}),a.on("keydown",function(){clearTimeout(e)}),c(".candidates-filter .ej-candidate-job-select, .candidates-filter .ej-candidate-rating-select, .candidates-filter .ej-candidate-status-select").on("change",function(e){e.preventDefault(),_(g())})},c.easyjobs.handleAllCandidatePagination=function(){c("body").on("click",".ej-js-pagination li a:not('.ej-pagination-control')",function(e){e.preventDefault();var a=c(this).data("page-number"),e=(c(".ej-all-candidates"),g());e.page=a,_(e)}),c("body").on("click",".ej-candidate-next-page-link",function(e){e.preventDefault();var a=c(this).parents(".pagination-list").find(".pagination-list__item--active").next(".pagination-list__item ").find("a"),e=c(a).data("page-number"),a=g();a.page=e,_(a)}),c("body").on("click",".ej-candidate-prev-page-link",function(e){e.preventDefault();var a=c(this).parents(".pagination-list").find(".pagination-list__item--active").prev(".pagination-list__item").find("a"),e=c(a).data("page-number"),a=g();a.page=e,_(a)})},c.easyjobs.handleAllCandidateSearchFilterReset=function(){c(".ej-all-candidate-reset").on("click",function(e){e.preventDefault(),c(".ej-all-candidate-search").val("").html(""),c(".ej-candidate-job-select").val("select"),c(".ej-candidate-rating-select").val("select"),c(".ej-candidate-status-select").val("select"),_({})})},c.easyjobs.handlePipelineHamburgerToggle=function(){c(".pipeline-hamburger").on("click",function(e){e.preventDefault(),c(this).toggleClass("hamburger-button-active"),c(".pipeline-nav").toggleClass("hamburger-menu-show")})},c.easyjobs.handlePipelineCandidateDrag=function(){c(".pipeline__board--content").sortable({connectWith:".pipeline__board--content",cursor:"move",items:"li.pipeline-card",beforeStop:function(e,a){a=c(a.item[0]).parents(".pipeline__board--content").find(".pipeline-card-not-found");a.length&&a.remove()},update:function(e,a){var t,i,n,s,o,l;a.sender&&(t=(o=c(a.item[0])).data("applicant-id"),n=(i=a.sender).data("pipeline-id"),a=(s=o.parents(".pipeline__board--content")).data("pipeline-id"),o=s.data("job-id"),l=c("#pipeline-list-box"),n!==a&&(i.find(".pipeline-card").length||i.append('<li class="pipeline-card-not-found"><p>No candidates found</p></li>'),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{pipeline_id:a,applicants_id:[t],job_id:o,action:"easyjobs_change_pipeline"},beforeSend:function(){l.addClass("ej-loading")},success:function(e){var a,t,n;"success"===JSON.parse(e).status.trim()&&(a=i.siblings(".pipeline__board--title").find(".candidates-number"),t=parseInt(a.html()),n=s.siblings(".pipeline__board--title").find(" .candidates-number"),e=parseInt(n.html()),t&&a.html(t-1),n.html(e+1))},complete:function(){l.removeClass("ej-loading")}})))}}).disableSelection()},c.easyjobs.handlePipelineGridRegenerate=function(){c(".toggler-button").on("show.bs.tab",function(e){var a=c(e.target),t=a.data("job-id"),n=c(".pipeline-tab-content"),e=a.attr("href").replace("#","");a.parents(".content-area__body").find(".pipeline-move-btn").hide(),"pipeline-box"===e&&c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,action:"easyjobs_get_pipeline"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()&&k(e.data)},complete:function(){n.removeClass("ej-loading")}})})},c.easyjobs.handleSignInOptionToggle=function(){c(".alt__login").on("click",function(e){e.preventDefault();var a=c(this),e=c("."+a.data("target"));a.removeClass("active").siblings(".alt__login").addClass("active"),e.siblings(".connect-option").hide(),e.fadeIn(200).addClass("active")}),c(".create-account-btn").on("click",function(e){e.preventDefault(),c(".landing-tabs li:first-child a").removeClass("active"),c(".landing-tabs li:last-child a").addClass("active"),c(".landing-tab-content .tab-pane:first-child").removeClass("active show"),c(".landing-tab-content .tab-pane:last-child").addClass("active show")}),c(".sign-in-btn").on("click",function(e){e.preventDefault(),c(".landing-tabs li:last-child a").removeClass("active"),c(".landing-tabs li:first-child a").addClass("active"),c(".landing-tab-content .tab-pane:last-child").removeClass("active show"),c(".landing-tab-content .tab-pane:first-child").addClass("active show")})},c.easyjobs.handleSignIn=function(){c(".ej-login-form").on("submit",function(e){e.preventDefault();var n=c(this),a=n.serializeArray(),e=n.data("nonce"),t=c(".sign-in.connect-option");o(n)&&c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:a,nonce:e,action:"easyjobs_signin"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?("reload"===(e=t.action.trim())&&(swal({title:"Signed in successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes"},500)),"create_company"===e&&(window.location.href=easyJobsJs.current_page+"&landing_view=create_company&user="+t.user_key),"select_company"===e&&(c(".connect-option").each(function(e,a){c(a).hide()}),c(".social-signin").hide(),c(".company-select").fadeIn(200).find("select").append(i(t.companies)))):(t.error_type&&"invalid_nonce"===t.error_type.trim()&&swal({title:t.message,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}),c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):d(n,e,a)}))},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.handleCompanySelect=function(){c(".ej-company-select-form").on("submit",function(e){e.preventDefault();var a=c(this),t=c(".login-box"),e=a.data("nonce"),a=a.find('select[name="select_company"]');a.val()||a.siblings(".error-message").length||a.after('<div class="error-message"> Please select company </div>'),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{company:a.val(),nonce:e,action:"easyjobs_save_company"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){var a=c("#apiConnectStatus");("success"===e.trim()?a.find(".ej-success-msg"):a.find(".ej-error-msg")).show(),a.modal()},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.initSelect2=function(){c(".ej-select").select2()},c.easyjobs.handleSignUp=function(){c(".ej-signup-form").on("submit",function(e){e.preventDefault();var n=c(this),a=n.data("nonce"),e=n.serializeArray(),t=!0,i=null,s=null,o=c(".easy-page-body .login-box");c.each(e,function(e,a){"password"===a.name&&(i=a.value),"password_confirm"===a.name&&(s=a.value),t=l(n,a.name,a.value)}),t&&(i&&s&&i!==s?d(n,"password_confirm","Password confirmation dose not match"):c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:a,action:"easyjobs_signup"},beforeSend:function(){o.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?location.href=easyJobsJs.current_page+"&landing_view=create_company&user="+t.user_key:c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):d(n,e,a)})},complete:function(){o.removeClass("ej-loading")}}))})},c.easyjobs.handleCompanyCreate=function(){c(".ej-company-create-form").on("submit",function(e){e.preventDefault();var n=c(this),a=n.serializeArray(),t=n.data("user-key"),i=n.data("nonce"),s=c(".easy-page-body .login-box"),e=n.find('input[name="terms_and_policy"]');a.push({name:"terms_and_policy",value:e.is(":checked")?"true":""}),o(n,a)&&c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:n.serializeArray(),user_key:t,nonce:i,action:"easyjobs_create_company"},beforeSend:function(){s.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes":c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):d(n,e,a)})},complete:function(){s.removeClass("ej-loading")}})})},c.easyjobs.handleMovePipleButtonDisplay=function(){c(document).on("change",'.pipeline-checkbox input[type="checkbox"]',function(){var e=c(this),a=c(".pipeline-move-btn");e.is(":checked")?a.fadeIn(100):e.parents(".pipeline-tab").find('.pipeline-checkbox input[type="checkbox"]').filter(function(e,a){return c(a).is(":checked")}).length||a.hide()})},c.easyjobs.handleJobDelete=function(){c(".delete-job").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("job-id"),e=a.data("nonce"),n=a.parents(".ej-jobs");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,nonce:e,action:"easyjobs_delete_job"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){"success"===JSON.parse(e).status.trim()?(swal({title:"Job deleted successfully!!",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){location.reload()},1500)):swal({title:"Job delete failed",text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){n.removeClass("ej-loading")}})})},c.easyjobs.handleAdminMenuHighlight=function(){var t=c(".toplevel_page_easyjobs-admin").find(".wp-submenu.wp-submenu-wrap"),e=window.location.search.replace("?page=",""),a=window.location.hash.replace("#/","");"easyjobs"===e.trim()&&"settings"===a.trim()&&(t.find("li").removeClass("current"),t.find("li a:contains('Settings')").addClass("current").parent("li").addClass("current")),window.addEventListener("hashchange",function(){var e=window.location.search.replace("?page=",""),a=window.location.hash.replace("#/","");"easyjobs"===e.trim()&&"settings"===a.trim()&&(t.find("li").removeClass("current"),t.find("li a:contains('Settings')").addClass("current").parent("li").addClass("current"))})},c.easyjobs.handleCandidateExport=function(){c(".ej-export-candidates").on("click",function(e){e.preventDefault();var a=c(".candidates-table .table-wrap"),e=c(".easyjobs-job-id").val();c(".candidates-table .table__body .table__row").length?c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:e,action:"easyjobs_export_job_candidates",keywords:n()},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()&&e.data.url?window.location.href=e.data.url:swal({title:"Unable to export candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.removeClass("ej-loading")}}):swal({title:"No candidates to export",text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:1500})})},c.easyjobs.handleCandidateInvite=function(){var e=c(".ej-invite-candidate-modal"),a=c(".ej-invite-candidate-modal .modal-dialog .modal-content .invite__candidate--table .table-wrap");e.on("show.bs.modal",function(){x()}),e.on("hidden.bs.modal",function(){a.html(""),c(".ej-invite-candidate .error-message").html("")}),c(".ej-invite-candidate").on("submit",function(e){e.preventDefault();var a=c(this),e=a.find(".user-email").val();e.length?C(e,!1):a.find(".error-message").html("Please insert email address")}),c("body").on("click",".resend-invitation",function(e){e.preventDefault();e=c(this).parents(".table__row").data("candidate-email");C(e,!0)}),c("body").on("click",".delete-invitation",function(e){e.preventDefault();var a=c(this),t=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),e=c(".easyjobs-job-id").val(),a=a.parents(".table__row").data("candidate-email");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:e,action:"easyjobs_post_data",type:"delete_invitation",data:{email:a}},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Invitation removed",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),x()):swal({title:"Unable to remove invitation",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.handleRating=function(){c("body").on("mouseover",".user__text__ratting .rate-count",function(){var e=c(this);e.addClass("rated"),e.prevAll(".rate-count").addClass("rated"),e.nextAll(".rate-count").removeClass("rated")}),c("body").on("mouseleave",".user__text__ratting",function(){c(this).find(".rate-count").each(function(e,a){a=c(a);a.hasClass("has-rating")?a.addClass("rated"):a.removeClass("rated")})}),c(".candidates-table .rate-count").on("click",function(e){e.preventDefault();e=c(this);a(e,c(".candidates-table"),e.parents(".table__row").data("candidate-id"))}),c(".applicant-details .user-info__list .rate-count").on("click",function(e){e.preventDefault();e=c(this);a(e,c(".applicant-details .user-info__list"),new URL(window.location.href).searchParams.get("candidate-id"),!0)}),c(".user__ratting--removable").on("click",function(e){e.preventDefault();e=c(".user__ratting .candidate-rating").val();0!==parseInt(e)&&c(this).parents(".easy-page-body").find(".dg-wrapper").fadeIn(300)}),c(".remove-rating-cancel").on("click",function(e){e.preventDefault(),c(this).parents(".dg-wrapper").fadeOut(200)}),c(".remove-rating").on("click",function(e){e.preventDefault();var a=c(this);c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:new URL(window.location.href).searchParams.get("candidate-id"),action:"easyjobs_post_data",type:"rate_candidate",data:{rating:0}},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Rating removed successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){window.location.reload()},1200)):swal({title:"Unable to remove rating",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){a.parents(".dg-wrapper").fadeOut(100)}})})},c.easyjobs.handleGreetingModal=function(){c(".greeting-close-btn").on("click",function(e){e.preventDefault(),c(this).parents(".modal").removeClass("show")})},c.easyjobs.handleWatchVideo=function(){c(".ej-intro-video .watch-button").on("click",function(e){e.preventDefault(),c(".ej-intro-video .content__thumb img").hide(),c(this).hide();var a=c(".ej-intro-video .video").find("iframe"),e=a.attr("src");a.attr("src",e+"&autoplay=1"),c(".ej-intro-video .video").fadeIn(300)})};var s=function(e,a,t,n,i){c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{pipeline_id:e,applicants_id:a,job_id:t,action:"easyjobs_change_pipeline"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){"success"===JSON.parse(e).status.trim()&&i.call()},complete:function(){n.removeClass("ej-loading")}})},o=function(t,e){var e=e||t.serializeArray(),n=0;return c.each(e,function(e,a){l(t,a.name,a.value)&&n++}),n===e.length},l=function(e,a,t){var n=e.find('input[name="'+a+'"]'),i=n.siblings(".error-message"),s=n.parent();return t.length?((s.hasClass("input-group")||s.hasClass("checkbox"))&&(i=s.siblings(".error-message"),n.parent().removeClass("has-error")),i.length&&(n.removeClass("has-error"),i.remove()),!0):(d(e,a),!1)},d=function(e,a,t){var n=e.find('input[name="'+a+'"]'),i=n.parent(),e=n.siblings(".error-message"),a=t&&t||"The "+a.replaceAll("_"," ")+" field is required.";i.hasClass("input-group")||i.hasClass("checkbox")?(e=i.siblings(".error-message"),i.addClass("has-error")):n.addClass("has-error"),e.length?e.html(a):(i.hasClass("input-group")||i.hasClass("checkbox")?i:n).after('<div class="error-message"> '+a+" </div>")},i=function(e,a){var t="";return c.each(e,function(e,a){t+='<option value="'+a.value+'">'+a.name+"</option>"}),t},n=function(){var e=c(".easyjobs-search-candidates").val(),a=c(".easyjobs-filter .filter:checked"),t="",n=c(".stage-filter:checked"),i=c(".ej-job-candidate-filter select").val(),s=[];return a.each(function(){s.push(c(this).val())}),n.length&&c.each(n,function(e,a){t+=c(a).val(),e+1!==n.length&&(t+=",")}),{search:e,filter:s,pipeline:t,sortBy:"select"!==i?i:""}},r=function(e){var a=c(".candidates-table .table-wrap"),t=c(".easyjobs-job-id").val();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{parameters:e,job_id:t,action:"easyjobs_search_filter_candidates"},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status&&(e.candidates.length?(e=u(e.candidates),c(".candidates-table .table__body").html(e)):c(".candidates-table .table__body").html(f()))},complete:function(){c(".search-easyjobs-candidates").find('input[type="text"]').val(""),a.removeClass("ej-loading")}})},t=function(e){var a='<div class="input-wrapper pipeline-wrapper">';return a+='<input type="text" name="pipeline[]" disabled="disabled" class="form-control pipeline-stage" value="'+e+'" data-stage-id="null">',a+='<a href="#" class="input-wrapper-append delete-stage"><i class="eicon e-delete"></i></a>',a+="</div>",c.parseHTML(a)},u=function(e){var i="",s=easyJobsJs.easyjobs_admin_url,o=c(".ej-job-candidate-filter select").val(),l=c(".easyjobs-ai-enabled").val();return c.each(e,function(e,a){var t=w("final_score"),n=a.final_ai_score;i+=' <div class="table__row" data-candidate-id="'+a.id+'">',i+='<div class="table-cell user__info">',i+='<a href="'+s+"&candidate-id="+a.id+' " class="d-flex align-items-center">',i+='<div class="user__image">',i+='<img src="'+a.user.profile_image+'" alt="" class="w-100 img-fluid">',i+="</div>",i+='<h4 class="user__name">'+a.user.name+"</h4>",i+="</a></div>",l&&(a.showAiScore?(i+='<div class="table-cell user-ai-score has-ai-score">',"select"!==o&&("SORT_BY_SKILL_MATCH"===o&&(t=w("skill"),n=a.skills_score),"SORT_BY_EDUCATION_MATCH"===o&&(t=w("education"),n=a.education_score),"SORT_BY_EXPERIENCE_MATCH"===o&&(t=w("experience"),n=a.experience_score),"SORT_BY_QUIZ_SCORE"===o&&(t=w("quiz"),n=Math.round(a.quiz_marks_obtain/a.quiz_marks_total*100))),n&&(i+='<div class="progress">',i+='<div class="progress-bar" role="progressbar" style="width: '+n+"%; background-color: "+t+'" aria-valuemin="0" aria-valuemax="100" aria-valuenow="'+n+'">',i+=n+"%",i+="</div></div>",a.scores&&Object.keys(a.scores).length&&(i+='<div class="ai-score-details"><ul>',c.each(a.scores,function(e,a){null!==a&&(i+="<li>",i+=J(e.replace("_"," "))+": ",i+='<strong style="color: '+w(e)+'">'+a+"%</strong>",i+="</li>")}),i+="</ul></div>")),i+="</div>"):i+='<div class="table-cell user-ai-score"></div>');n=a.pipeline.name||"";i+='<div class="table-cell candidate-apply-time">'+a.created_at+"</div>",i+='<div class="table-cell job__status">',i+='<div class="semi-button h-modified '+p(n)+' w-100">'+n+"</div>",i+="</div>",i+='<div class="table-cell user-rate">',i+='<div class="user__text__ratting">'+b(a.rating)+"</div>",i+="</div>",i+="</div>"}),c.parseHTML(i)},p=function(e){if(e)switch(e.trim().toLowerCase()){case"selected":return"success-label";case"rejected":return"danger-label";default:return"primary-label"}return""},b=function(e){for(var a="",t=1;t<=5;t++)a+='<div class="rate-count',a+=t<=e?' rated has-rating">':'">',a+='<i class="eicon e-star"></i></div>';return a+=""},f=function(e){e='<h4 class="empty-message">'+(e=e||"No candidates found")+"</h4>";return c.parseHTML(e)},m=function(){var e=c(".ej-tab-content"),a=c(".easyjobs-job-search").val(),n=c(".ej-tab-content .tab-pane.active").attr("id");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{keyword:a,type:n,action:"easyjobs_search_jobs"},beforeSend:function(){e.addClass("ej-loading")},success:function(e){var a=JSON.parse(e),t=c("#"+n+" .ej-jobs");"success"===a.status?a.jobs.length?(e=a.jobs,a=v(e,n,a.job_page_links),t.html(a)):c("#"+n+".ej-jobs").html(f("No Jobs Found")):t.html('<div class="col"><h4 class="empty-message">No jobs found</h4></div>')},complete:function(){e.removeClass("ej-loading")}})},v=function(e,t,n){var i="",s=easyJobsJs.easyjobs_admin_url,o=easyJobsJs.easyjobs_app_url;return c.each(e,function(e,a){i+='<div class="col"><div class="job-card">',i+='<div class="card-thumbnail" style="background-image: url('+a.banner_image+')">',a.is_expired?i+='<div class="thumbnail__status thumbnail__status--danger">Expired</div>':i+=h(a.status),i+='<div class="card-control">',i+='<a href="'+s+"&job-id="+a.id+'&view=pipeline" class="control-button control-button--primary">',i+='<div class="control-button__icon"><i class="eicon e-pipe"></i></div>',i+="<span>Pipeline</span>",i+="</a>",i+='<a href="'+s+"&job-id="+a.id+'&view=candidates" class="control-button control-button--primary">',i+='<div class="control-button__icon"><i class="eicon e-users"></i></div>',i+="<span>Candidates</span>",i+="</a>",i+='<a href="'+o+"/job/"+a.id+'/edit" target="_blank" class="control-button control-button--primary">',i+='<div class="control-button__icon"><i class="eicon e-document"></i></div>',i+="<span>Edit</span>",i+="</a>","published-jobs"===t&&(i+='<div class="dropdown job-control-more">',i+='<button class="control-button control-button--primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',i+='<div class="control-button__icon"><i class="eicon e-plus"></i></div><span>More</span>',i+="</button>",i+='<ul class="dropdown-menu dropdown-menu-center">',i+=' <a class="dropdown-item" href="'+n[a.id]+'" target="_blank"><div class="dropdown-icon"><i class="eicon e-eye-1"></i></div>View</a>',a.hasOwnProperty("social_links")&&(i+='<div class="share-button">',i+='<a class="dropdown-item" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><div class="dropdown-icon"><i class="eicon e-share"></i></div>Share</a>',i+='<div class="share-button-menu">',i+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="eicon e-facebook"></i></div>facebook</a>',i+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="eicon e-linkedin"></i></div>linkedin</a>',i+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="eicon e-twitter"></i></div>twitter</a>',i+="</div>",i+="</div>"),i+="</ul>",i+="</div>"),i+="</div>",i+="</div>",i+='<div class="card-content">',i+='<div class="card-content__left">',i+='<h3 class="card-title">'+a.title+"</h3>",i+='<h4 class="card-sub-title">'+a.category.name+"</h4>",i+='<div class="card-info-group">',i+='<p class="card-info">Post Date: '+a.created_at+"</p>",i+='<p class="card-info">Expiry Date: '+a.expire_at+"</p>",i+="</div>",i+="</div>",i+=' <div class="card-content__right">',i+="<p>"+a.applicant_count+" Applied</p>",a.hasOwnProperty("applicants")&&(i+='<div class="applicants__img">',c.each(a.applicants,function(e,a){i+='<img src="'+a.image+'" alt="" />'}),i+='<p class="Applicants">'+a.applicant_count+"</p>",i+="</div>"),i+="</div>",i+="</div>",i+="</div></div>"}),c.parseHTML(i)},h=function(e){switch(e){case 1:return'<div class="thumbnail__status thumbnail__status--warning">Draft</div>';case 2:return'<div class="thumbnail__status thumbnail__status--success">Active</div>';case 3:return'<div class="thumbnail__status thumbnail__status--info">Archived</div>';case 4:return'<div class="thumbnail__status thumbnail__status--danger">Deleted</div>';case 10:return'<div class="thumbnail__status thumbnail__status--success">Republished</div>';default:return'<div class="thumbnail__status thumbnail__status--success">Active</div>'}},g=function(){var e=c(".ej-all-candidate-search").val(),a=c(".ej-candidate-job-select").val(),t=c(".ej-candidate-rating-select").val(),n=c(".ej-candidate-status-select").val(),i={};return e.length&&(i.candidate_name=e),"select"!==a&&(i.job_id=a),"select"!==t&&(i.rating=t),"select"!==n&&(i.status=n),i},_=function(t){var n=c(".ej-all-candidates");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{parameters:t,action:"easyjobs_search_filter_all_candidates"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){var a=JSON.parse(e);"success"===a.status&&a.data.data.length?(e=j(a.data.data),n.html(e),a=y(parseInt(a.data.current_page),parseInt(a.data.per_page),parseInt(a.data.total),t),c(".ej-all-candidates-pagination").html(a)):n.html('<div class="col"><h4 class="empty-message">No candidates found</h4></div>')},complete:function(){n.removeClass("ej-loading")}})},j=function(e){var n="";return c.each(e,function(e,a){var t=0<a.rating?"":"disabled";n+='<div class="col"><div class="user-card">',n+='<div class="user__ratting info-button-light '+t+'">',n+='<i class="eicon e-star"></i> '+a.rating,n+="</div>",n+='<div class="user-picture">',n+='<img src="'+a.profile_image+'" alt="applicant-img" class="img-fluid" />',n+="</div>",n+='<div class="user-info">',n+="<h5>"+a.name+"</h5>",a.job_title&&(n+="<p>"+a.job_title+"</p>"),n+="</div>",n+='<a href=" '+easyJobsJs.easyjobs_admin_url+"&candidate-id="+a.id+' " class="semi-button semi-button-info mt-auto"> View details </a>',n+="</div></div>"}),c.parseHTML(n)},y=function(e,a,t,n){var i=Math.ceil(t/a),s="";if(1<i){s+='<ul class="pagination-list pt-5 ej-js-pagination">',s+='<li class="pagination-list__item"><a class="pagination-list__link ej-pagination-control ej-candidate-prev-page-link" href="#"><i class="eicon e-arrow-left"></i></a></li>';for(var o=1;o<=i;o++){s+='<li class="pagination-list__item '+(e===o?"pagination-list__item--active":"")+'">',s+='<a class="pagination-list__link" href="#" data-page-number="'+o+'">'+o+"</a>",s+="</li>"}s+='<li class="pagination-list__item"><a class="pagination-list__link ej-pagination-control ej-candidate-next-page-link" href="#"><i class="eicon e-arrow-right"></i></a></li>',s+="</ul>"}return c.parseHTML(s)},k=function(e){var n=c(".pipeline-box"),i=easyJobsJs.easyjobs_admin_url;c.each(e,function(e,a){var t="";n.find(".pipeline-"+a.name.toLowerCase().replace(" ","-")+" .candidates-number").html(a.applicants.length),c.each(a.applicants,function(e,a){t+='<div class="col"> <div class="pipeline-card">',t+='<div class="user__image">',t+='<img src=" '+a.user.profile_image+' " alt="" class="w-100 img-fluid">',t+="</div>",t+='<div class="user__details">',a.user.name.length&&(t+='<a class="user__name" href="'+i+"&candidate-id="+a.id+' " >'+a.user.name+"</a>"),t+='<div class="d-flex">',a.user.nationality&&(t+='<span class="user__address">'+a.user.nationality+"</span>"),t+='<p class="user__experience"> '+a.user.experience+" Years</p>",t+="</div>",t+='<div class="d-flex justify-content-between mt-3">',t+='<div class="user__text__ratting"> '+b(a.rating)+" </div>",t+='<div class="application-duration"> '+a.updated_diff+" </div>",t+="</div>",t+='<label class="checkbox pipeline-checkbox">',t+='<input type="checkbox" class="applicant" value=" '+a.id+' " id="applicant- '+a.id+' ">',t+="<span></span></label>",t+="</div>",t+="</div></div>"}),n.find("#"+a.name.toLowerCase().replace(" ","-")+" .row").html(t)})},w=function(e){switch(e){case"quiz":return"#ff9635";case"skill":return"#2fc1e1";case"education":return"#597dfc";case"experience":return"#60ce83";default:return"#ff5f74"}},C=function(e,a){var t=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),n=c(".easyjobs-job-id").val(),i=c(".ej-invite-candidate");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:n,action:"easyjobs_post_data",type:"invite_candidate",data:{email:e}},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Invitation link is sent to candidate",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),a||x()):swal({title:"Unable to invite candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){t.removeClass("ej-loading"),a||(i.find(".user-email").val(""),i.find(".error-message").html(""))}})},x=function(){var e=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),a=c(".ej-invite-candidate-modal .modal-dialog .modal-content .invite__candidate--table .table-wrap"),t=c(".easyjobs-job-id").val();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,action:"easyjobs_get_invited_candidates"},beforeSend:function(){e.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?e.data.length?a.removeClass("d-none").html(S(e.data)):a.html('<h6 class="empty-message">No invitation found.</h6>'):swal({title:"Unable to get candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){e.removeClass("ej-loading")}})},S=function(e){var t="";return t+='<div class="table table-modal">',t+='<div class="table__row table__head">',t+='<div class="table-cell">Name</div><div class="table-cell">Email</div>',t+='<div class="table-cell" style="width: 110px;"><span class="d-flex justify-content-end">Actions</span></div>',t+="</div>",c.each(e,function(e,a){t+='<div class="table__row" data-candidate-email="'+a.email+'">',t+='<div class="table-cell">'+a.name+"</div>",t+='<div class="table-cell"> <span class="text-break">'+a.email+" </span> </div>",t+=' <div class="table-cell" style="width: 110px;"> <div class="d-flex justify-content-end">',t+='<a href="#" class="control-button control-button--warning resend-invitation"><div class="control-button__icon"><i class="eicon e-send"></i></div></a>',t+='<a href="#" class="control-button control-button--danger delete-invitation"><div class="control-button__icon"><i class="eicon e-delete"></i></div></a>',t+="</div></div>",t+="</div>"}),t+="</div>"},J=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a=function(a,e,t,n){var i=5-a.nextAll(".rate-count").length,n=n||!1;c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:t,action:"easyjobs_post_data",type:"rate_candidate",data:{rating:i}},beforeSend:function(){e.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(a.addClass("rated has-rating"),a.prevAll(".rate-count").addClass("rated has-rating"),a.nextAll(".rate-count").removeClass("rated has-rating"),n?window.location.reload():swal({title:"Rated successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:1500})):swal({title:"Unable rate candidate",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){e.removeClass("ej-loading")}})}}(jQuery);